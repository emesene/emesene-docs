

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
  "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">

<html xmlns="http://www.w3.org/1999/xhtml">
  <head>
    <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
    
    <title>e3 &mdash; emesene v2.0 documentation</title>
    <link rel="stylesheet" href="../../_static/default.css" type="text/css" />
    <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <script type="text/javascript">
      var DOCUMENTATION_OPTIONS = {
        URL_ROOT:    '../../',
        VERSION:     '2.0',
        COLLAPSE_INDEX: false,
        FILE_SUFFIX: '',
        HAS_SOURCE:  true
      };
    </script>
    <script type="text/javascript" src="../../_static/jquery.js"></script>
    <script type="text/javascript" src="../../_static/underscore.js"></script>
    <script type="text/javascript" src="../../_static/doctools.js"></script>
    <link rel="top" title="emesene v2.0 documentation" href="../../" />
    <link rel="up" title="Project Structure" href="../" />
    <link rel="next" title="interfaces" href="../interfaces/" />
    <link rel="prev" title="Project Structure" href="../" /> 
  </head>
  <body>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             accesskey="I">index</a></li>
        <li class="right" >
          <a href="../interfaces/" title="interfaces"
             accesskey="N">next</a> |</li>
        <li class="right" >
          <a href="../" title="Project Structure"
             accesskey="P">previous</a> |</li>
        <li><a href="../../">emesene v2.0 documentation</a> &raquo;</li>
          <li><a href="../" accesskey="U">Project Structure</a> &raquo;</li> 
      </ul>
    </div>  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          <div class="body">
            
  <div class="section" id="e3">
<h1>e3<a class="headerlink" href="#e3" title="Permalink to this headline">¶</a></h1>
<p>e3 is a module that provides a common interface for multiple IM libraries.</p>
<p>It started as an API for e3.msn but it grew to support multiple implementations.</p>
<p>The main components in e3 are:</p>
<p>Events</p>
<blockquote>
<p>An event is a data structure that contains information about an event that
happened in the protocol, for example a contact went online or a contact
sent us a message.</p>
<p>An event has a type, that identifies what kind of event it is for example
Event.LOGIN_SUCCEED and zero or more parameters depending on the event type.</p>
<p>Events are generated in the handlers that implement the e3 API and should be
handled by the GUI code to inform the user about the events.</p>
</blockquote>
<p>Actions</p>
<blockquote>
<p>An action is a data structure that contains information about an action
that the protocol implementation should execute, for example to send a
message or change the status.</p>
<p>An action has a type, that identifies what kind of action the
implementation should execute, for example Action.ACTION_LOGIN and zero
or more parameters depending on the action type.</p>
<p>Actions are generated in the GUI and sent to the protocol handler to trigger
an action.</p>
<p>Actions and Events are pretty similar but in opposite directions, Actions are
generated by the user and sent to the protocol handler and Events are generated
by the protocol handler and sent to the user. Both have a type and zero or more
parameters.</p>
</blockquote>
<p>Worker</p>
<blockquote>
<p>The Worker is the main class that a protocol implementation should subclass to
implement a specific protocol, base.Worker has all the common code and empty
methods that should be implemented by the protocol implementation.</p>
<p>A dummy implementation is provided to see how a really basic protocol should be
implemented and to be used for testing in emesene. This implementation is almost
an echo implementation where some dummy users are added to the user list and all
messages sent are responded back by some random contact.</p>
<p>Worker is a class that inherits from threading.Thread and has one input Queue
that receives Actions and one output Queue that sends Events.</p>
<p>Using Queues provides an easy way to synchronize between threads and allow
to run lengthy operations in the thread without blocking the GUI.</p>
<p>The main method of Worker is run that loops until e3.Action.ACTION_QUIT is found.
The function blocks waiting for an item in the input Queue, when an item arrives
(an Action object) then the handler for the Action type is obtained and the
handler is called passing the parameters from the Action object to the handler.</p>
<p>The handler can generate zero or more events by adding Event objects to the events
Queue.</p>
<p>Worker shouldn&#8217;t interact with other parts of the code other than using the events
Queue to avoid race conditions and synchronization issues.</p>
<p>This architecture is implemented to allow using threads but avoid the need for locks
which are a pain to code and maintain.</p>
</blockquote>
<p>Session</p>
<blockquote>
<p>The Session class is the class that exposes the functionality to the end user.</p>
<p>It contains all the information about a given session and exposes the Worker API
in a more programmer friendly fashion by encapsulation the actions behind methods.</p>
<p>This is the class you should interact with from the emesene GUI.</p>
</blockquote>
<div class="section" id="base">
<h2>base<a class="headerlink" href="#base" title="Permalink to this headline">¶</a></h2>
<p>The base module contains all the base classes that are common to the protocols
and may be extended.</p>
<p>If a class should be used or extended by all protocols then it should be here.</p>
</div>
<div class="section" id="cache">
<h2>cache<a class="headerlink" href="#cache" title="Permalink to this headline">¶</a></h2>
<p>This module contains classes to deal with caching things for all the protocols.</p>
</div>
<div class="section" id="common">
<h2>common<a class="headerlink" href="#common" title="Permalink to this headline">¶</a></h2>
<p>This module contains common code that could be used by any implementation.</p>
<p>If you have some functionality that is common to many protocols such as config,
xml etc it should go here.</p>
</div>
<div class="section" id="dummy">
<h2>dummy<a class="headerlink" href="#dummy" title="Permalink to this headline">¶</a></h2>
<p>A dummy implementation of a protocol, it works as an example for people that
want to implement a new protocol with the e3 API and as a dummy protocol to be
used by developers to test emesene without reconnecting multiple times.</p>
</div>
<div class="section" id="jabber">
<h2>jabber<a class="headerlink" href="#jabber" title="Permalink to this headline">¶</a></h2>
<p>A wrapper around the xmpppy module to work with the e3 API to support the jabber
protocol (Gtalk, Jabber, Facebook chat etc).</p>
</div>
<div class="section" id="msn">
<h2>msn<a class="headerlink" href="#msn" title="Permalink to this headline">¶</a></h2>
<p>The first implementation of the MSN protocol for e3, this version is a little
behind papyon but is useful as a fall-back and also as a reference
implementation for e3 since it doesn&#8217;t wrap any other library, it&#8217;s the only
pure e3 based real protocol implementation.</p>
</div>
<div class="section" id="papylib">
<h2>papylib<a class="headerlink" href="#papylib" title="Permalink to this headline">¶</a></h2>
<p>A wrapper around the papyon module to work with the e3 API to support the MSN
protocol.</p>
</div>
</div>


          </div>
        </div>
      </div>
      <div class="sphinxsidebar">
        <div class="sphinxsidebarwrapper">
  <h3><a href="../../">Table Of Contents</a></h3>
  <ul>
<li><a class="reference internal" href="#">e3</a><ul>
<li><a class="reference internal" href="#base">base</a></li>
<li><a class="reference internal" href="#cache">cache</a></li>
<li><a class="reference internal" href="#common">common</a></li>
<li><a class="reference internal" href="#dummy">dummy</a></li>
<li><a class="reference internal" href="#jabber">jabber</a></li>
<li><a class="reference internal" href="#msn">msn</a></li>
<li><a class="reference internal" href="#papylib">papylib</a></li>
</ul>
</li>
</ul>

  <h4>Previous topic</h4>
  <p class="topless"><a href="../"
                        title="previous chapter">Project Structure</a></p>
  <h4>Next topic</h4>
  <p class="topless"><a href="../interfaces/"
                        title="next chapter">interfaces</a></p>
  <h3>This Page</h3>
  <ul class="this-page-menu">
    <li><a href="../../_sources/structure/e3.txt"
           rel="nofollow">Show Source</a></li>
  </ul>
<div id="searchbox" style="display: none">
  <h3>Quick search</h3>
    <form class="search" action="../../search/" method="get">
      <input type="text" name="q" size="18" />
      <input type="submit" value="Go" />
      <input type="hidden" name="check_keywords" value="yes" />
      <input type="hidden" name="area" value="default" />
    </form>
    <p class="searchtip" style="font-size: 90%">
    Enter search terms or a module, class or function name.
    </p>
</div>
<script type="text/javascript">$('#searchbox').show(0);</script>
        </div>
      </div>
      <div class="clearer"></div>
    </div>
    <div class="related">
      <h3>Navigation</h3>
      <ul>
        <li class="right" style="margin-right: 10px">
          <a href="../../genindex/" title="General Index"
             >index</a></li>
        <li class="right" >
          <a href="../interfaces/" title="interfaces"
             >next</a> |</li>
        <li class="right" >
          <a href="../" title="Project Structure"
             >previous</a> |</li>
        <li><a href="../../">emesene v2.0 documentation</a> &raquo;</li>
          <li><a href="../" >Project Structure</a> &raquo;</li> 
      </ul>
    </div>
    <div class="footer">
        &copy; Copyright 2010, Mariano Guerra, C10uD.
      Created using <a href="http://sphinx.pocoo.org/">Sphinx</a> 1.0.1.
    </div>
  </body>
</html>